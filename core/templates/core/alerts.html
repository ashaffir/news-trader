{% extends "core/base.html" %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="col-12 col-lg-8">
      <div class="card shadow-sm">
        <div class="card-header bg-dark text-white">
          <strong>Telegram Alert Settings</strong>
        </div>
        <div class="card-body">
          <form method="post">
            {% csrf_token %}

            <div class="form-check form-switch mb-3">
              <input class="form-check-input" type="checkbox" id="enabled" name="enabled" {% if settings.enabled %}checked{% endif %}>
              <label class="form-check-label" for="enabled">Enable Alerts</label>
            </div>

            <hr/>

            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="bot_status_enabled" name="bot_status_enabled" {% if settings.bot_status_enabled %}checked{% endif %}>
              <label class="form-check-label" for="bot_status_enabled">Bot enabled/disabled</label>
            </div>

            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="order_open_enabled" name="order_open_enabled" {% if settings.order_open_enabled %}checked{% endif %}>
              <label class="form-check-label" for="order_open_enabled">Order open</label>
            </div>

            <div class="form-check form-switch mb-2">
              <input class="form-check-input" type="checkbox" id="order_close_enabled" name="order_close_enabled" {% if settings.order_close_enabled %}checked{% endif %}>
              <label class="form-check-label" for="order_close_enabled">Order close</label>
            </div>

            <div class="form-check form-switch mb-4">
              <input class="form-check-input" type="checkbox" id="trading_limit_enabled" name="trading_limit_enabled" {% if settings.trading_limit_enabled %}checked{% endif %}>
              <label class="form-check-label" for="trading_limit_enabled">Trading limit reached</label>
            </div>

            <hr/>

            <div class="row g-3 align-items-center mb-2">
              <div class="col-auto">
                <div class="form-check form-switch">
                  <input class="form-check-input" type="checkbox" id="heartbeat_enabled" name="heartbeat_enabled" {% if settings.heartbeat_enabled %}checked{% endif %}>
                  <label class="form-check-label" for="heartbeat_enabled">Bot heartbeat (periodic)</label>
                </div>
              </div>
              <div class="col-auto">
                <label for="heartbeat_interval_minutes" class="col-form-label">Every</label>
              </div>
              <div class="col-auto">
                <input type="number" class="form-control" id="heartbeat_interval_minutes" name="heartbeat_interval_minutes" value="{{ settings.heartbeat_interval_minutes }}" min="1" max="1440" style="width: 110px;">
              </div>
              <div class="col-auto">
                <span class="form-text">minutes</span>
              </div>
            </div>

            <div class="mt-3">
              <button class="btn btn-primary d-inline-block w-auto me-2" type="submit">Save Settings</button>
            </div>
          </form>

          <form class="d-inline-block mt-3" method="post" action="/alerts/send-test/">
            {% csrf_token %}
            <button class="btn btn-outline-secondary d-inline-block w-auto" type="submit">Send Test Alert</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}


